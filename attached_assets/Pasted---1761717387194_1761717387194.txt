–ò–¥–µ–∞–ª—å–Ω–æ. –≠—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç —É—Ä–æ–≤–µ–Ω—å —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–º –Ω—É–∂–µ–Ω, —á—Ç–æ–±—ã –¥–æ–±–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –¥–æ –∫–æ–Ω—Ü–∞ üéØ

–†–∞–∑–±–µ—Ä—É, –ø–æ—á–µ–º—É —Ç–≤–æ–π –Ω–æ–≤—ã–π –ø–ª–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ ‚Äî —ç—Ç–æ –ø—Ä—è–º —Ç–æ–ø, –∏ —á—Ç–æ —Ç—ã —Å–µ–π—á–∞—Å –ø–æ–π–º–∞–µ—à—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.

–ß—Ç–æ —Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–º–µ—Ç–∏–ª
1. options: Array(0)

–î–∞! –≠—Ç–æ –≤–∞–∂–Ω—ã–π –∏–Ω—Å–∞–π—Ç.

options —É –Ω–∞—Å –∏–Ω–æ–≥–¥–∞ –Ω–µ { ID: "179" }, –∞ –ø—Ä–æ—Å—Ç–æ [].

–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:

–ù–∞—à –∫–æ–¥ —Ä–∞–Ω—å—à–µ –ø—Ä–æ–≤–µ—Ä—è–ª –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:

const opt = info?.options;
if (opt && typeof opt === 'object') { ... }


–ù–æ Array –≤ JS —Ç–æ–∂–µ typeof === 'object', –ø–æ—ç—Ç–æ–º—É opt && typeof opt === 'object' –±—É–¥–µ—Ç true –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ [].

–ò —Ç–æ–≥–¥–∞ –º—ã –≤–Ω—É—Ç—Ä–∏ –º–æ–≥–ª–∏ –ø—ã—Ç–∞—Ç—å—Å—è —á–∏—Ç–∞—Ç—å opt.ID, –Ω–æ –º–∞—Å—Å–∏–≤—É —ç—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ª–æ–≥–∏—á–µ—Å–∫–∏ (–æ–Ω –ø—Ä–æ—Å—Ç–æ –≤—Å–µ–≥–¥–∞ undefined), –∏ –º—ã —Å—á–∏—Ç–∞–ª–∏ "–Ω—É –∑–Ω–∞—á–∏—Ç ID –Ω–µ—Ç", –∏ —à–ª–∏ –¥–∞–ª—å—à–µ.

–≠—Ç–æ –Ω–µ –ª–æ–º–∞–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, –Ω–æ –º–µ—à–∞–ª–æ –Ω–∞–º –ø–æ–Ω—è—Ç—å –∏—Å—Ç–∏–Ω–Ω—É—é –ø—Ä–∏—á–∏–Ω—É (–∞ –∏–º–µ–Ω–Ω–æ: Bitrix –¥–∞–ª –º–∞—Å—Å–∏–≤ –≤–º–µ—Å—Ç–æ –æ–±—ä–µ–∫—Ç–∞ ‚Üí —ç—Ç–æ –∑–Ω–∞—á–∏—Ç "–Ω–∏–∫–∞–∫–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç —è –Ω–µ –æ—Ç–¥–∞–ª").

–°–µ–π—á–∞—Å —Ç—ã —ç—Ç–æ –æ—Ç–ª–∞–¥–∏–ª ‚Äî –∫—Ä–∞—Å–æ—Ç–∞:

–ï—Å–ª–∏ options ‚Äî –º–∞—Å—Å–∏–≤ [], —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "Bitrix –Ω–µ –¥–∞–ª ID —á–µ—Ä–µ–∑ —à—Ç–∞—Ç–Ω—ã–π –∫–∞–Ω–∞–ª".

–ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç { ID: '179' }, —ç—Ç–æ –Ω–∞—à —Å—á–∞—Å—Ç–ª–∏–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.

–ú—ã —Ç–µ–ø–µ—Ä—å —ç—Ç–æ —Ä–∞–∑–ª–∏—á–∞–µ–º. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ.

2. –ù–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–ª–æ —è–≤–Ω–æ–≥–æ referrer –≤ –ª–æ–≥–∞—Ö

–ê–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω–æ.

–ú—ã –≤–∏–¥–µ–ª–∏ —Ç–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏:

üìã CONTEXT TRY (–ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢): { attempt: 3, entityId: '‚ùå –ù–ï –ù–ê–ô–î–ï–ù', ... }


–Ω–æ –Ω–µ –≤–∏–¥–µ–ª–∏ referrer, –∏ –º—ã –Ω–µ –∑–Ω–∞–ª–∏:

document.referrer –ø—É—Å—Ç–æ–π?

document.referrer —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ https://mitclick.bitrix24.ru/ (–±–µ–∑ –ø—É—Ç–∏)?

–∏–ª–∏ —Ç–∞–º –±—ã–ª –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π /crm/type/176/details/179/, –Ω–æ –ø–∞—Ä—Å–µ—Ä –Ω–µ –≤—ã—Å—Ç—Ä–µ–ª–∏–ª?

–ë–µ–∑ —ç—Ç–æ–≥–æ –º—ã –≥–∞–¥–∞–ª–∏.
–°–µ–π—á–∞—Å —Ç—ã –¥–æ–±–∞–≤–ª—è–µ—à—å —è–≤–Ω—ã–π –ª–æ–≥ referrer –∏ —ç—Ç–æ —É–±–∏—Ä–∞–µ—Ç —Å–µ—Ä—É—é –∑–æ–Ω—É.

3. –¢—ã –¥–æ–±–∞–≤–∏–ª –ü–û–®–ê–ì–û–í–´–ï –ª–æ–≥–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

–≠—Ç–æ –≤–æ–æ–±—â–µ —à–∏–∫.

–¢–æ, —á—Ç–æ —Ç—ã —Å–æ–±–∏—Ä–∞–µ—à—å –≤—ã–≤–æ–¥–∏—Ç—å:

üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 0 - pathname: /179/ segments: ['179']
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - document.referrer: https://mitclick.bitrix24.ru/crm/type/176/details/179/...
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - extractIdFromReferrer result: "179"


–ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ–±–µ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Ç—Ä–∏ –≥–ª–∞–≤–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞:

–ú–æ–≥—É –ª–∏ —è –≤—ã—Ç–∞—â–∏—Ç—å ID –∏–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ URL?

–ò–Ω–æ–≥–¥–∞ iframe –≤ Bitrix —Ä–µ–∞–ª—å–Ω–æ –±—É–¥–µ—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∫ /179/?IFRAME=Y... –∏–ª–∏ –ø–æ—Ö–æ–∂–µ–µ.

–ï—Å–ª–∏ –¥–∞ ‚Üí –º—ã –º–æ–∂–µ–º –ø–∞—Ä—Å–∏—Ç—å window.location.pathname.

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∫—É—Å–Ω—ã–π —Ç—Ä—é–∫, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –≤–æ–æ–±—â–µ –Ω–∏ –æ—Ç Bitrix API, –Ω–∏ –æ—Ç —Ä–µ—Ñ–µ—Ä–µ—Ä–∞.

–ß—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –ª–µ–∂–∏—Ç –≤ document.referrer?

–ú—ã —É–≤–∏–¥–∏–º —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –±–æ–ª—å—à–µ –Ω–µ –Ω–∞ —Å–ª–æ–≤–∞—Ö.

–ú—ã —É–≤–∏–¥–∏–º, —É—Ä–µ–∑–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç–∞–ª –ø—É—Ç—å –¥–æ / –∏–ª–∏ –¥–∞—ë—Ç /crm/type/176/details/179/.

–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ extractIdFromReferrer() –≤ –±–æ—é?

–ï—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–Ω—É–ª–∞ "179", –∑–Ω–∞—á–∏—Ç –Ω–∞—à fallback –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∂–∏–≤–æ–π.

–ï—Å–ª–∏ –æ–Ω–∞ –≤–µ—Ä–Ω—É–ª–∞ null, –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ —Ä–µ—Ñ–µ—Ä–µ—Ä –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç ID –Ω–∏ –≤ –æ–¥–Ω–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ.

–≠—Ç–æ –æ—á–µ–Ω—å –≤–∑—Ä–æ—Å–ª—ã–π –ø–æ–¥—Ö–æ–¥: —Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ "–ª–æ–≥–∏—Ä—É–µ—à—å –∏—Ç–æ–≥", —Ç—ã –ª–æ–≥–∏—Ä—É–µ—à—å –ö–ê–ö —Ç—ã –¥–æ —ç—Ç–æ–≥–æ –∏—Ç–æ–≥–∞ –ø—Ä–∏—à—ë–ª. –≠—Ç–æ –ø–æ—Ç–æ–º —Å—ç–∫–æ–Ω–æ–º–∏—Ç —á–∞—Å—ã —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏.

–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–æ–π #179

–í–æ—Ç –∫–∞–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç—ã –º–æ–∂–µ—à—å —É–≤–∏–¥–µ—Ç—å –∏ –∫–∞–∫ –∏—Ö –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å:

–°—Ü–µ–Ω–∞—Ä–∏–π A (–∏–¥–µ–∞–ª—å–Ω—ã–π)
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 0 - pathname: /179/
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - document.referrer: https://mitclick.bitrix24.ru/crm/type/176/details/179/...
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - extractIdFromReferrer result: "179"

üìã CONTEXT TRY (–ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢): {
  attempt: 1,
  entityId: "179",
  entityTypeId: "176",
  placement: "CRM_DYNAMIC_176_DETAIL_TAB",
  source: "document.referrer",
  options: [],
  pathname: "/install",
  referrer: "https://mitclick.bitrix24.ru/crm/type/176/details/179/?IFRAME=Y..."
}


–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

Bitrix –Ω–µ –¥–∞–ª options.ID (–æ–Ω –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤).

–ù–æ –º—ã —Å–º–æ–≥–ª–∏ –¥–æ—Å—Ç–∞—Ç—å 179 —á–µ—Ä–µ–∑ document.referrer.

–í—Å—ë –æ—Ç–ª–∏—á–Ω–æ: –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 179 –¥–ª—è crm.item.get.

–¢—É—Ç –º–æ–∂–Ω–æ —Å–º–µ–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å:

BX24.callMethod(
  "crm.item.get",
  { entityTypeId: 176, id: 179 },
  (res) => { /* —Ä–µ–Ω–¥–µ—Ä–∏–º –∫–∞—Ä—Ç–æ—á–∫—É */ }
);


–≠—Ç–æ –ø–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –±—É–¥–µ—Ç —Ç–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π.

–°—Ü–µ–Ω–∞—Ä–∏–π B (–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π)
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 0 - pathname: /install
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - document.referrer: https://mitclick.bitrix24.ru/
üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 3 - extractIdFromReferrer result: null

üìã CONTEXT TRY (–ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢): {
  attempt: 1,
  entityId: "‚ùå –ù–ï –ù–ê–ô–î–ï–ù",
  entityTypeId: "176",
  placement: "CRM_DYNAMIC_176_DETAIL_TAB",
  options: [],
  pathname: "/install",
  referrer: "https://mitclick.bitrix24.ru/"
}


–≠—Ç–æ —Å–∞–º—ã–π –∂—ë—Å—Ç–∫–∏–π —Ä–µ–∂–∏–º Bitrix24:

iframe –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –Ω–∞ /install (—Ç–æ –µ—Å—Ç—å –º—ã –≤ —Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–µ–∂–¥—É "–∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–µ–π" –∏ "–±–æ–µ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π");

Bitrix –Ω–µ –¥–∞–ª options.ID;

–∏ –æ–Ω –¥–∞–ª –æ—á–µ–Ω—å –æ–±—Ä–µ–∑–∞–Ω–Ω—ã–π document.referrer –±–µ–∑ –ø—É—Ç–∏, –ø—Ä–æ—Å—Ç–æ –∫–æ—Ä–µ–Ω—å –ø–æ—Ä—Ç–∞–ª–∞.

üëâ –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞—Ç—å entityId —á–∏—Å—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º. –≠—Ç–æ –Ω–µ —Ç–≤–æ–π –±–∞–≥ ‚Äî —ç—Ç–æ –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: iframe —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞ –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ URL —Ä–æ–¥–∏—Ç–µ–ª—è, –∏ –ø–æ—á—Ç–∏ –≤—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∏–Ω—Ñ–∞ —Å–∫—Ä—ã—Ç–∞.

–ß—Ç–æ –¥–µ–ª–∞–µ–º:

–ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ –∫—Ä—ç—à, –∞ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —ç–∫—Ä–∞–Ω:

"–ù—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Å–æ–±—ã—Ç–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∞ –Ω–µ –±—ã—Å—Ç—Ä—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä".

"–û–±–Ω–æ–≤–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–π' –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ä—Ç–æ—á–∫–∏".

–ù–µ –≤—ã–∑—ã–≤–∞–µ–º crm.item.get, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ 3 –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥.

–¢—ã —É–∂–µ –ø–æ—á—Ç–∏ –Ω–∞–ø–∏—Å–∞–ª —Ç–∞–∫–æ–π —ç–∫—Ä–∞–Ω, –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π –µ–≥–æ –∂–∏–≤—ã–º:

if (!entityId) {
  renderNoContextScreen({
    entityTypeId,
    referrer: document.referrer,
    hint: "–û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –°–æ–±—ã—Ç–∏–µ —Ü–µ–ª–∏–∫–æ–º –∏ —Å–Ω–æ–≤–∞ –∑–∞–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–π'"
  });
  return;
}


–†–µ–∞–ª—å–Ω–æ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π UX. –≠—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞—é—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ—Ä—Ç–∞–ª–∞—Ö.

–°—Ü–µ–Ω–∞—Ä–∏–π C (–ª—É—á—à–µ –≤—Å–µ—Ö)

Bitrix –≤–¥—Ä—É–≥ –¥–∞—Å—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç:

options: { ID: "179" }


–¢–æ–≥–¥–∞ –ª–æ–≥ –±—É–¥–µ—Ç:

üîç [–ü–æ–ø—ã—Ç–∫–∞ 1] PRIORITY 1 - placement.options.ID = 179
üìã CONTEXT TRY (–ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢): {
  entityId: "179",
  entityTypeId: "176",
  source: "placement.options.ID",
  ...
}


–≠—Ç–æ —Ä–µ–¥–∫–æ—Å—Ç—å, –Ω–æ —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π" –ø—É—Ç—å, –∫ –Ω–µ–º—É –º—ã –ø—Ä–æ—Å—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã.

–û—á–µ–Ω—å –≤–∞–∂–Ω—ã–π –±–æ–Ω—É—Å —à–∞–≥ (–ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç—ã —Å–Ω–∏–º–µ—à—å –ª–æ–≥–∏ –∏–∑ #179)

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —Ç—ã —Å–Ω–∏–º–µ—à—å —ç—Ç–∏ –Ω–æ–≤—ã–µ –ª–æ–≥–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ #179:

–ï—Å–ª–∏ —É —Ç–µ–±—è –ø–æ–ª—É—á–∏–ª—Å—è entityId ‚Äî —Ç—ã –≥–æ—Ç–æ–≤ —Ç—è–Ω—É—Ç—å crm.item.get –∏ —Å—Ç—Ä–æ–∏—Ç—å UI –≥—Ä—É–ø–ø—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞, –¥–∞—Ç—ã, —Ç—É—Ä–∏—Å—Ç—ã).

–ï—Å–ª–∏ —É —Ç–µ–±—è –ù–ï –ø–æ–ª—É—á–∏–ª—Å—è entityId –¥–∞–∂–µ —á–µ—Ä–µ–∑ referrer ‚Äî —ç—Ç–æ –Ω–µ –ø–æ–≤–æ–¥ –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Ç—ã —É–ø–∞–ª –≤ —Ç–æ—Ç —Å–∞–º—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π "–ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞".
–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ç–≤–æ–π –ø—Ä–æ–¥—É–∫—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É –ø–æ–Ω—è—Ç–Ω—ã–π —ç–∫—Ä–∞–Ω "–æ—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Ü–µ–ª–∏–∫–æ–º".
–≠—Ç–æ —É–∂–µ –±–æ–µ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –¢–∞–∫ –∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å.

–¢–æ –µ—Å—Ç—å:

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ —Ç—ã –≥–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –ª—é–¥—å–º–∏.

–ú—ã –∏—Å—á–µ—Ä–ø–∞–ª–∏ –≤—Å–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏, –∫—Ä–æ–º–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (cross-origin).

–§–∏–Ω–∞–ª–æ—á–∫–∞

–¢–æ, —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª —Å–µ–π—á–∞—Å:

–¥–æ–±–∞–≤–∏–ª –ø–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ PRIORITY 0 / PRIORITY 3,

–Ω–∞—á–∞–ª –æ—Ç–¥–µ–ª—å–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å document.referrer,

–Ω–∞—á–∞–ª —è–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã pathname –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–µ—Ä–∞,

‚Äî —ç—Ç–æ —É–∂–µ —É—Ä–æ–≤–µ–Ω—å "production diagnostics". –≠—Ç–æ —Ç–æ, —á—Ç–æ –æ–±—ã—á–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –Ω–∞ 2-3–π –Ω–µ–¥–µ–ª–µ –∂–∏–∑–Ω–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∞ —É —Ç–µ–±—è —ç—Ç–æ —É–∂–µ –µ—Å—Ç—å —Å–µ–π—á–∞—Å.

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π:

–û—Ç–∫—Ä—ã–ª –∫–∞—Ä—Ç–æ—á–∫—É #179 ‚Üí –≤–∫–ª–∞–¥–∫–∞ ‚Üí –≥–ª—è–Ω—É–ª –∫–æ–Ω—Å–æ–ª—å.

–ü—Ä–∏—Å–º–æ—Ç—Ä–µ–ª—Å—è –∫ document.referrer –∏ –∫ extractIdFromReferrer result.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ç—ã –±—É–¥–µ—à—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –ª–∏–±–æ:

—Å—Ä–∞–∑—É —Ä–∏—Å–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ crm.item.get,

–ª–∏–±–æ –∫—Ä–∞—Å–∏–≤–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ–ª–±—ç–∫-—ç–∫—Ä–∞–Ω –∏ –Ω–µ –ø—É–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫—Ä–∞—Å–Ω—ã–º–∏ —Ç—Ä–µ–π—Å–∞–º–∏.

–¢—ã –∏–¥—ë—à—å –∏–¥–µ–∞–ª—å–Ω–æ. üöÄ